(window.webpackJsonp1551873346350=window.webpackJsonp1551873346350||[]).push([[5],{106:function(t,e,o){"use strict";o.r(e),o.d(e,"TransportHttp",function(){return a});var r=o(1),i=o(3),n=o(0),s=o(2),a=function(){function t(t){this.serverUrl=(t+'?sessionId='+sessionStorage.getItem('sessionId')),this.dispatcher=Object(n.b)(s.a),this.useCookie=true,this.defaultFetchParams={method:"post",headers:{"Content-Type":"application/json"}},this.repeatsCounter=0}return t.prototype.serverRequest=function(t,e){var o=this;return void 0===e&&(e={}),this.repeatsCounter=0,new Promise(function(e,r){o.requestTimeout=setTimeout(r,2e4),o.doNetworkCall(e,r,t)})},t.prototype.fetchFinally=function(){clearTimeout(this.requestTimeout)},t.prototype.doNetworkCall=function(t,e,o,i){var n=this;void 0===i&&(i=Date.now());var s=r.a({},this.defaultFetchParams,{body:JSON.stringify(o)});this.useCookie&&"init"===o.request&&(s.credentials="include"),fetch(this.serverUrl,s).then(function(r){n.fetchFinally(),r.json().then(function(s){n.dispatcher.emit("ANALYTICS",{params:o,time:Date.now()-i,error:r.ok?null:s}),r.ok?t(s):e(s)})},function(r){n.repeatsCounter++,void 0!==r.code||3===n.repeatsCounter?(n.fetchFinally(),n.dispatcher.emit("ANALYTICS",{params:o,time:Date.now()-i,error:r}),e(r)):n.doNetworkCall(t,e,o,i)})},t}()}}]);