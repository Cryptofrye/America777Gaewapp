(window.webpackJsonp1551873346350=window.webpackJsonp1551873346350||[]).push([[1],{72:function(t,e,n){"use strict";var i;n.r(e),function(t){t[t.SLOT=0]="SLOT",t[t.TABLE=1]="TABLE",t[t.UNKNOWN=2]="UNKNOWN"}(i||(i={}));var o=function(){function t(){}return t.afterDecorator=function(t,e){return function(n){return function(){var i=n.apply(this,arguments);return t.apply(e||this,arguments),i}}},t.beforeDecorator=function(t,e){return function(n){return function(){return t.apply(e||this,arguments),n.apply(this,arguments)}}},t.overrideFunction=function(t,e,n){t[e]=n(t[e])},t}(),s="ExternalEvent.GAME_API_INITIALIZED",a="ExternalEvent.GAME_LOADED",r="ExternalEvent.ROUND_STARTED",c="ExternalEvent.ROUND_ENDED",p="ExternalEvent.PLAY_CLICKED",d={AnticipationModel:"AnticipationModel",EventDispatcher:"EventDispatcher",RenderManager:"RenderManager",UserModel:"UserModel",TurboModeModel:"TurboModeModel",AutoSpinsModel:"AutoSpinsModel",SpinComponentModel:"SpinComponentModel",SoundManager:"SoundManager",StakesModel:"StakesModel",GameDataModel:"GameDataModel",BetHelper:"BetHelper",ServerService:"ServerService",UIModel:"UIModel"},u=function(){function t(){}return t.prototype.initialize=function(t){this.api=t,this.roundEnded=!0;var e=this.api.context.getGameClassInstance(d.ServerService);this.uiModel=this.api.context.getGameClassInstance(d.UIModel),this.uiModel?this.uiStateChageEventName="UI_STATE_CHANGE":this.uiStateChageEventName="CHANGE_UI",e&&(o.overrideFunction(e,"spin",o.beforeDecorator(this.processSpinStart,this)),o.overrideFunction(e,"processResponse",o.beforeDecorator(this.processResponse,this)))},t.prototype.processSpinStart=function(){this.roundEnded&&(this.roundEnded=!1,this.responseRoundEnded=!1,this.api.removeListener(this.uiStateChageEventName,this.onUIStateChange,this),this.api.dispatchEvent(r))},t.prototype.processResponse=function(){var t=arguments[0];this.responseRoundEnded=t.result.roundEnded,!this.roundEnded&&this.responseRoundEnded&&this.api.addListener(this.uiStateChageEventName,this.onUIStateChange,this)},t.prototype.onUIStateChange=function(t){var e=this,n=t;!n&&this.uiModel&&(n=this.uiModel.getState()),n&&this.responseRoundEnded&&n.spin&&n.spin.enabled&&("SpinComponentState.SPIN"===n.spin.mode||"spin"===n.spin.mode||"SpinButtonState.SPIN"===n.spin.mode)&&Promise.resolve().then(function(){return e.finishRound()})},t.prototype.finishRound=function(){this.roundEnded=!0,this.api.removeListener(this.uiStateChageEventName,this.onUIStateChange,this),this.api.dispatchEvent(c)},t}(),h=function(){function t(){}return t.prototype.initialize=function(t){var e=this;this.api=t,window.addEventListener("message",function(t){e.displayMessage(t.data)},!1)},t.prototype.displayMessage=function(t){switch(console.log(t),t.type){case"updateBalance":this.api.setBalance(t.value);break;case"play":this.api.playButtonClick();break;case"spin":this.api.spin();break;case"pause":this.api.pause();break;case"unpause":this.api.unpause();break;case"10auto":this.api.setAutoSpins(10,!1);break;case"until":this.api.setAutoSpins(0,!0);break;case"resetAuto":this.api.resetAutoSpins();break;case"showPaytable":this.api.showPaytable();break;case"hidePaytable":this.api.hidePaytable();break;case"turboON":this.api.setTurboMode(!0);break;case"turboOff":this.api.setTurboMode(!1);break;case"increaseBet":this.api.increaseBet();break;case"decreaseBet":this.api.decreaseBet();break;case"takeScreenshot":this.api.takeScreenshot();break;case"dispatchEvent":this.api.dispatchEvent(t.value);break;default:console.warn("ExternalAPI.displayMessage(): Unknown type of command ["+t.type+"] is received")}},t}(),l=function(){function t(){}return t.prototype.initialize=function(t){o.overrideFunction(t.context.dispatcher,"dispatch",o.beforeDecorator(function(){"RENDER"!==arguments[0]&&console.log("%c"+arguments[0],"background: red",arguments[1])}))},t}(),f=function(){function t(t){this.context=t,this.injections=this.context.kernel.mappingsMap.getAll().toArray(),this.gameID=this.context.slotSettings.slotSettingsData.ID,this.dispatcher=this.getGameClassInstance(d.EventDispatcher),this.autoSpinsModel=this.getGameClassInstance(d.AutoSpinsModel),this.spinComponentModel=this.getGameClassInstance(d.SpinComponentModel),this.renderManager=this.getGameClassInstance(d.RenderManager),this.userModel=this.getGameClassInstance(d.UserModel),this.stakesModel=this.getGameClassInstance(d.StakesModel),this.gameDataModel=this.getGameClassInstance(d.GameDataModel),this.betHelper=this.getGameClassInstance(d.BetHelper),this.turboModeModel=this.getGameClassInstance(d.TurboModeModel),this.soundManager=this.getGameClassInstance(d.SoundManager)}return t.prototype.getGameClassInstance=function(t){for(var e,n=0,i=this.injections;n<i.length;n++){var o=i[n];o.instance&&o.instance.constructor.name.indexOf(t)>-1?e=o:o.instanceResultConstructor&&o.instanceResultConstructor.name.indexOf(t)>-1?e=o:o.instanceBindedConstructor&&o.instanceBindedConstructor.name.indexOf(t)>-1&&(e=o)}return e?e.getInstance():null},t}(),E=n(1),M=function(){function t(t){this._isGameLoaded=!1,this.context=t,this._isGameLoaded?this.onGameLoaded():(this.addGameListener("Event.GAME_LOADED",this.onGameLoaded),this.addGameListener("GAME_LOADED",this.onGameLoaded))}return t.prototype.addGameListener=function(t,e){this.context.dispatcher.addListener(t,e,this)},t.prototype.removeGameListener=function(t,e){this.context.dispatcher.removeListener(t,e,this)},t.prototype.onGameLoaded=function(){this._isGameLoaded=!0,this.removeGameListener("Event.GAME_LOADED",this.onGameLoaded),this.removeGameListener("GAME_LOADED",this.onGameLoaded),this.dispatchEvent(a)},Object.defineProperty(t.prototype,"isGameLoaded",{get:function(){return this._isGameLoaded},enumerable:!0,configurable:!0}),t.prototype.pause=function(){this.context.ticker.stop(),this.disableAudio(),this.context.renderManager.objectToRender&&(this.context.pausedRenderObject=this.context.renderManager.objectToRender,this.context.renderManager.objectToRender=null)},t.prototype.unpause=function(){this.context.ticker.start(),this.enableAudio(),this.context.renderManager.objectToRender=this.context.pausedRenderObject},t.prototype.disableAudio=function(){this.context.dispatcher.dispatch("MUTE",!0),this.context.soundManager.setSoundsMute&&this.context.soundManager.setSoundsMute(!0)},t.prototype.enableAudio=function(){this.context.dispatcher.dispatch("MUTE",!1),this.context.soundManager.setSoundsMute&&this.context.soundManager.setSoundsMute(!1)},t.prototype.playButtonClick=function(){this.context.dispatcher.dispatch("Event.PLAY_CLICK"),this.context.dispatcher.dispatch("PLAY_CLICK"),this.context.dispatcher.dispatch("playBtn_clicked_mediator")},t.prototype.showPaytable=function(){this.context.dispatcher.dispatch("SHOW_PAYTABLE"),this.context.dispatcher.dispatch("GameRunEvents.SHOW_PAYTABLE","paytable_group"),this.context.dispatcher.dispatch("UIControlsEvent.INFO_BUTTON_CLICK")},t.prototype.hidePaytable=function(){this.context.dispatcher.dispatch("HIDE_PAYTABLE"),this.context.dispatcher.dispatch("GameRunEvents.HIDE_PAYTABLE"),this.context.dispatcher.dispatch("MainSceneEvents.HIDE_PAYTABLE")},t.prototype.setBalance=function(t){this.context.userModel.balance=t,this.context.context.updateViewBalance(t)},t.prototype.getBalance=function(){return this.context.userModel.balance},t.prototype.getCurrency=function(){return this.context.userModel.currency},t.prototype.getCurrencySymbol=function(){return this.context.userModel.currencySign},t.prototype.increaseBet=function(){this.context.stakesModel.increaseStake()},t.prototype.decreaseBet=function(){this.context.stakesModel.decreaseStake()},t.prototype.getCoinValue=function(){return this.context.stakesModel.currentStakeValue},t.prototype.getTotalBet=function(){return this.context.betHelper?this.context.betHelper.getTotalBet():this.context.stakesModel.getTotalBet()},t.prototype.getAvailableCoins=function(){return this.context.stakesModel.stakes},t.prototype.getCurrentBetsIndex=function(){return this.context.stakesModel.currentStakeIndex},t.prototype.setCurrentBetsIndex=function(t){this.context.stakesModel.currentStakeIndex=t},t.prototype.dispatchEvent=function(t,e){this.context&&this.context.dispatcher&&this.context.dispatcher.dispatch(t,e)},t.prototype.addListener=function(t,e,n){this.context&&this.context.dispatcher&&this.context.dispatcher.addListener(t,e,n)},t.prototype.removeListener=function(t,e,n){this.context&&this.context.dispatcher&&this.context.dispatcher.removeListener(t,e,n)},t.prototype.takeScreenshot=function(){this.context.renderManager.render(!0);var t=document.createElement("a");t.href=document.getElementById("canvas").toDataURL("image/png"),t.download="screenshot_"+Date.now()+".png",document.body.appendChild(t),t.click()},t.prototype.setAdditionalRequestParams=function(t){var e=this;this.context.context.api.server.additionalRequestParams?Object.keys(t).forEach(function(n){e.context.context.api.server.additionalRequestParams[n]=t[n]}):this.context.context.api.setAdditionalServerParams(t)},t.prototype.setCombination=function(t){this.context.context.api.cbSetPredefinedCombination?this.context.context.api.cbSetPredefinedCombination(t):this.context.context.api.server.setPredefinedCombination(t)},t.prototype.getTotalWin=function(){return this.context&&this.context.gameDataModel?this.context.gameDataModel.totalWinning:(console.error('"getTotalWin" is not available for current game or GameAPI implementation'),-1)},t}(),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E.d(e,t),e.prototype.setAutoSpins=function(t,e){this.context.autoSpinsModel.activate(t,e)},e.prototype.resetAutoSpins=function(){this.context.autoSpinsModel.isActive&&(this.context.autoSpinsModel.deactivate(),this.context.dispatcher.dispatch("BottomBarEvent.STOP_AUTO_SPINS_CLICK"))},e.prototype.getAutoSpinsNumber=function(){return this.context.autoSpinsModel.autoSpinsCount},e.prototype.isUntilFeature=function(){return this.context.autoSpinsModel.isUntilFeature},e.prototype.getTotalBetDefaultStake=function(){var t=this.context.stakesModel,e=this.context.betHelper;if(e){var n=e.getTotalBet()/t.currentStakeValue;return t.stakeDefault*n}var i=t.anteBetCoinsCount?t.stakeDefault*t.anteBetCoinsCount:0;return t.stakeDefault*t.currentCoinsValue*t.totalBetMultiplier+i},e.prototype.getTotalBet=function(){var t=this.context.betHelper;return t?t.getTotalBet():this.context.stakesModel.getTotalBet()},e.prototype.spin=function(){this.context.dispatcher.dispatch("SPIN_CLICK"),this.context.dispatcher.dispatch("READY_TO_SPIN"),this.context.dispatcher.dispatch("BottomBarEvent.SPIN_CLICK"),this.context.dispatcher.dispatch("BottomBarEvent.READY_TO_SPIN"),this.context.dispatcher.dispatch("UIControlsEvent.SPIN_START_REQUESTED"),this.context.dispatcher.dispatch("UIControlsEvent.SPIN_COMPONENT_PRESSED"),this.context.dispatcher.dispatch("UIControlsEvent.SPIN_COMPONENT_RELEASED")},e.prototype.getTurboMode=function(){return this.context.turboModeModel.isActive},e.prototype.setTurboMode=function(t){this.context.turboModeModel.canBeActive=t},e.prototype.skipAnticipation=function(){var t=this.context.context.slotParameters;if(t.anticipation&&t.anticipation.symbols){this.addListener(c,this.roundEndedHandler,this),this.anticipationConfig=JSON.parse(JSON.stringify(t.anticipation)),t.anticipation.symbols={},t.anticipation.animation.time=1e-6;var e=this.context.getGameClassInstance(d.AnticipationModel);e&&e.anticipationConfig&&(e.anticipationConfig.symbols={},e.anticipationConfig.animation.time=1e-6)}},e.prototype.roundEndedHandler=function(){this.removeListener(c,this.roundEndedHandler),this.context.context.slotParameters.anticipation=JSON.parse(JSON.stringify(this.anticipationConfig));var t=this.context.getGameClassInstance(d.AnticipationModel);t&&t.anticipationConfig&&(t.anticipationConfig.animation=this.context.context.slotParameters.anticipation.animation)},e.prototype.isAutoSpinsActive=function(){return this.context.autoSpinsModel.isActive},e.prototype.isContinuousSpinsActive=function(){return this.context.spinComponentModel&&this.context.spinComponentModel.isContinuousSpin},e}(M),x=function(){function t(){}return t.create=function(t,e){var n=new f(t);switch(n.gameType=e,e){case i.SLOT:return new S(n);default:return new M(n)}},t}(),m=function(){function t(){}return t.prototype.initialize=function(t){this.api=t,this.addListeners()},t.prototype.addListeners=function(){this.api.addListener("Event.PLAY_CLICK",this.playClickHandler,this),this.api.addListener("PLAY_CLICK",this.playClickHandler,this)},t.prototype.removeListeners=function(){this.api.removeListener("Event.PLAY_CLICK",this.playClickHandler,this),this.api.removeListener("PLAY_CLICK",this.playClickHandler,this)},t.prototype.playClickHandler=function(){this.api.dispatchEvent(p),this.removeListeners()},t}(),g="BigWinEvents.BIG_WIN_HAS_BEEN_WON_ANALYTICS",v="BigWinEvents.BIG_WIN_HAS_BEEN_SKIPPED_ANALYTICS",C="BigWinEvents.MEGA_WIN_HAS_BEEN_WON_ANALYTICS",y="BigWinEvents.MEGA_WIN_HAS_BEEN_SKIPPED_ANALYTICS",A=function(){function t(){}return t.prototype.initialize=function(t){[g,v,C,y].forEach(function(e){t.addListener(e,function(){return t.wrapperAPI.addToAnalyticsLog(e)})})},t}();n.d(e,"ExternalAPI",function(){return I});var I=function(){function t(){}return t.initialize=function(e,n){var o=x.create(e,i.SLOT);o.context.ticker=n,window[t.GAME_API_KEY]=o,t.addModules(),t.MODULES.forEach(function(t){return t.initialize(o)}),window.postMessage(s,"*")},t.addModules=function(){t.registerModule(new u),t.registerModule(new m),t.registerModule(new h,!0),t.registerModule(new l,!0),t.registerModule(new A,!0)},t.registerModule=function(e,n){void 0===n&&(n=!1),n||t.MODULES.push(e)},t.GAME_API_KEY="GameAPI",t.SW_CONTEXT_KEY="swContext",t.MODULES=[],t}(),L=Date.now(),_=window.setInterval(function(){window[I.SW_CONTEXT_KEY]?(clearInterval(_),I.initialize(window[I.SW_CONTEXT_KEY].context,window[I.SW_CONTEXT_KEY].PIXI.ticker.shared)):Date.now()-L>3e5&&clearInterval(_)},100)}}]);