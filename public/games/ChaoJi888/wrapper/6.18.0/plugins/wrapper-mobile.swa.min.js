(window.webpackJsonp1561725448952=window.webpackJsonp1561725448952||[]).push([[9],{126:function(e,t,i){"use strict";i.r(t);var n=i(0),r=i(23),s=i(10),o=i(20),a=i(2);function c(){return document.createElement("canvas")}var p=i(1),u=function(){function e(){this.server=Object(p.c)(r.a),"performance"in window&&performance&&performance.setResourceTimingBufferSize&&performance.setResourceTimingBufferSize(300)}var t;return t=e,Object.defineProperty(e.prototype,"isWebSocket",{get:function(){return 1===this.server.mode},enumerable:!0,configurable:!0}),e.prototype.getResources=function(){var e,t=this.server.getServerUrl();if(this.isWebSocket){var i=function(e){var t;return"function"==typeof URL?t=new URL(e):(t=document.createElement("a")).href=e,t.origin}(t);e=performance.getEntriesByType("resource").filter(function(e){return e.name.startsWith(i)})}else(e=performance.getEntriesByName(t,"resource"))&&e.length||console.warn("Error detect resource");return e},e.prototype.getServerTimings=function(){if(!window.performance||"function"!=typeof performance.getEntriesByName)return t.getEmptyTimings();var e=this.getResources();return e&&e.length?("function"==typeof performance.clearResourceTimings&&performance.clearResourceTimings(),e.map(function(e){var t=e.startTime,i=e.responseEnd;return{domainLookupStart:e.domainLookupStart||0,domainLookupEnd:e.domainLookupEnd||0,connectStart:e.connectStart||t||0,connectEnd:e.connectEnd||i||0,responseStart:e.responseStart||t||0,responseEnd:i||0,requestStart:e.requestStart||t||0,secureConnectionStart:e.secureConnectionStart||t||0}})):t.getEmptyTimings()},e.getEmptyTimings=function(){return[{domainLookupStart:0,domainLookupEnd:0,connectStart:0,connectEnd:0,responseStart:0,responseEnd:0,requestStart:0,secureConnectionStart:0}]},e=t=n.c([p.a],e)}(),g=i(28),h=i(6),m=i(8),d=i(3),v=i(18),l=i(26);i.d(t,"SkywindAnalytics",function(){return f});var S="n/a",f=function(){function e(){this.url="",this.eventsLog=[],this.gameLoadingTime=0,this.assetsLoadingTime=0,this.locale=Object(p.c)(s.a),this.server=Object(p.c)(r.a),this.splash=Object(p.c)(o.a),this.menuModel=Object(p.c)(g.a),this.device=Object(p.c)(m.a),this.wrapperModel=Object(p.c)(h.a),this.dispatcher=Object(p.c)(d.a),this.timingsService=Object(p.c)(u),this.mode=this.wrapperModel.funMode?"fun":"real",this.brandId=this.wrapperModel.token.brandId||-1,this.playerCode=this.wrapperModel.token.playerCode||S,this.wrapperModel.getServerConfig().then(this.initialize.bind(this))}return e.prototype.initialize=function(e){var t=this;e.skywindAnalytics&&(this.url=e.skywindAnalytics,this.dispatcher.on("ADD_TO_ANALYTICS",function(e){return t.eventsLog.push(e)}).on("ANALYTICS",this.onServerAnalytics,this),this.setPromiseForInitPost(),this.dispatcher.emit("ANALYTICS",this.getBasicData()))},e.prototype.setPromiseForInitPost=function(){var e=this,t=window.performance&&performance.timing&&performance.timing.navigationStart||Date.now();this.readyToInitPromise=new Promise(function(i){e.dispatcher.once("SPLASH_COMPLETE",function(){e.assetsLoadingTime=Date.now()-t,i()})}).then(function(){return new Promise(function(i){e.gameAPI=Object(p.c)(l.a).gameAPI,e.gameAPI?e.gameAPI.addListener(v.a.GAME_LOADED,function(){e.gameLoadingTime=Date.now()-t,i()}):i()})})},e.prototype.fetch=function(e){this.url&&fetch(this.url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})},e.prototype.getBasicData=function(){var e=this.menuModel.getVolume();return{brandId:this.brandId,isMobile:!0,mode:this.mode,name:document.title,origin:location.origin,playerCode:this.playerCode,sound:!!e,soundLevel:e,type:"start",wrapperVersion:this.wrapperModel.version}},e.prototype.getDeviceData=function(){if(!this.deviceData){var e=(p=devicePixelRatio||1,{screenSize:Object(a.j)(screen.width*p,screen.height*p),viewportSize:Object(a.j)(innerWidth*p,innerHeight*p)}),t=e.screenSize,i=e.viewportSize,n=function(){var e=c(),t=e.getContext("webgl")||e.getContext("experimental-webgl"),i=!!(t&&t instanceof WebGLRenderingContext);return{webgl1support:i,maxTextureSize:t&&i?t.getParameter(t.MAX_TEXTURE_SIZE):-1}}(),r=n.webgl1support,s=n.maxTextureSize;this.isWebSocket=1===this.server.mode,this.deviceData={benchmark:this.device.benchMarkScore,browser:this.device.getBrowser(),canvasMode:!this.device.isWebGLSupport,dpi:this.device.screenDensity,es6support:this.device.isES6Support,maxTextureSize:s,operatingSystem:this.device.getOS(),orientation:this.device.isLandscape?"landscape":"portrait",pixelRatio:devicePixelRatio,protocol:this.isWebSocket?"WebSocket":"HTTP",screenSize:t,slowConnection:this.device.isSlowConnection,splashName:this.splash.splashName,userAgent:navigator.userAgent,viewportSize:i,webgl1support:r,webgl2support:(o=c().getContext("webgl2"),!!(o&&o instanceof window.WebGL2RenderingContext))}}var o,p;return this.deviceData},e.prototype.getSpinData=function(e){var t=n.a({},this.getBasicData(),this.getDeviceData(),this.getGameData(),this.getRequestData(e),this.getTimingsData(e),{spinActionStage:this.spinActionStage,type:"spin"});return this.eventsLog.length&&(t.eventsLog=this.eventsLog),this.gameAPI&&(t.isTurboModeActive=!!this.gameAPI.getTurboMode(),t.isAutoSpinsActive=!!this.gameAPI.isAutoSpinsActive(),t.isContinuousSpinsActive=!!this.gameAPI.isContinuousSpinsActive()),this.eventsLog=[],this.setSpinActionStage(e),t},e.prototype.getInitData=function(e){var t=n.a({},this.getBasicData(),this.getDeviceData(),this.getGameData(),this.getRequestData(e),this.getTimingsData(e),{assetsLoadingTime:this.assetsLoadingTime,currency:this.wrapperModel.token.currency||e.params.startGameToken.currency||S,gameLoadingTime:this.gameLoadingTime,language:this.locale.getLocale(),referrer:document.referrer||S,urlParams:this.device.getParams,type:"init"});return this.setSpinActionStage(e),t},e.prototype.setSpinActionStage=function(e){var t=e.isJackpot,i=e.roundEnded;this.spinActionStage=t?"Jackpot":!1===i?"Feature":"Main game"},e.prototype.getPlayData=function(e){return n.a({},this.getBasicData(),this.getGameData(),this.getRequestData(e),{type:"play"})},e.prototype.getRequestData=function(e){void 0===e&&(e={});var t=e.error,i=e.params||{},n=i.request,r=void 0===n?void 0:n,s=i.requestId,o={request:r,requestId:void 0===s?-1:s,errorCode:t?t.code||-1:0};return t&&(o.errorMessage=t.message||t),o},e.prototype.getGameData=function(){return{gameId:this.server.getGameCode(),gameServer:this.server.getServerUrl(),gameSession:this.server.getSession().getSession()}},e.prototype.getTimingsData=function(e){var t=this.timingsService.getServerTimings(),i=t[t.length-1],n=this.serverTimingsToSWATimings(i,e);return t.length>1&&(n.options=this.serverTimingsToSWATimings(t[0],e)),n},e.prototype.serverTimingsToSWATimings=function(e,t){var i=e.domainLookupStart,n=e.domainLookupEnd,r=e.connectStart,s=e.connectEnd,o=e.responseStart,a=e.responseEnd,c=e.requestStart,p=e.secureConnectionStart;return{dnsTime:n-i,requestDuration:t?t.time:0,responseTime:a-o,sslTime:c-p,tcpTime:s-r,timeToFirstByte:o-c,totalTime:a-r}},e.prototype.onServerAnalytics=function(e){return n.b(this,void 0,void 0,function(){var t;return n.e(this,function(i){switch(i.label){case 0:return"start"!==e.type?[3,1]:(t=e,[3,4]);case 1:return"init"!==e.params.request?[3,3]:[4,this.readyToInitPromise];case 2:return i.sent(),t=this.getInitData(e),[3,4];case 3:"spin"===e.params.request?t=this.getSpinData(e):"play"===e.type?t=this.getPlayData(e):e.error&&(t=n.a({},e.error,{type:"error"})),i.label=4;case 4:return t&&this.fetch(t),[2]}})})},e=n.c([p.a],e)}()}}]);